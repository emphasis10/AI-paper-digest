# LibShalom: Optimizing Small and Irregular-Shaped Matrix Multiplications on ARMv8 Multi-Cores
## TL;DR
## Summary
- [https://zwang4.github.io/publications/sc21.pdf](https://zwang4.github.io/publications/sc21.pdf)

### 논문 요약 및 각 섹션 내용 요약

#### 논문 요약
이 논문은 ARMv8 기반 멀티코어 CPU에서 작은 및 불규칙한 모양의 행렬 곱셈(GEMM)을 최적화하는 오픈소스 라이브러리인 LibShalom을 소개합니다. 기존의 BLAS 라이브러리가 큰 행렬에 최적화되어 있는 반면, LibShalom은 작은 및 불규칙한 모양의 행렬에서 성능을 향상시키기 위해 특별히 설계되었습니다. LibShalom은 Goto 알고리즘을 기반으로 하여 데이터 패킹과 계산을 겹쳐 실행하여 메모리 접근 지연을 최소화합니다. 실험 결과, LibShalom은 여러 ARMv8 멀티코어 아키텍처에서 다른 주요 BLAS 라이브러리보다 우수한 성능을 보였습니다.

#### 섹션별 요약

1. **서론**
    - 행렬 곱셈(GEMM)은 고성능 컴퓨팅(HPC) 애플리케이션에서 중요한 역할을 합니다.
    - 기존의 선형 대수 라이브러리는 큰 행렬에서 높은 성능을 제공하지만, 작은 및 불규칙한 모양의 행렬에는 적합하지 않습니다.
    - ARMv8 아키텍처 기반의 멀티코어 CPU는 x86 기반 HPC 하드웨어의 대안으로 떠오르고 있으며, 작은 및 불규칙한 행렬을 최적화하는 라이브러리가 필요합니다.

2. **배경**
    - 문제 범위: GEMM은 작은 및 불규칙한 모양의 행렬에서 수행됩니다.
    - 기존의 GEMM 알고리즘: Goto 알고리즘을 사용하여 행렬을 분할하고 패킹하여 캐시 로컬리티를 향상시킵니다.

3. **동기와 개요**
    - 기존의 BLAS 라이브러리는 작은 행렬과 불규칙한 모양의 행렬에서 낮은 성능을 보입니다.
    - LibShalom은 패킹, 가장자리 케이스 처리 및 병렬화를 개선하여 이러한 문제를 해결합니다.

4. **알고리즘 최적화**
    - LibShalom은 데이터 패킹과 계산을 겹쳐 실행하여 메모리 접근 지연을 숨깁니다.
    - 루프 타일링 매개변수를 최적화하기 위한 분석적 방법을 사용합니다.

5. **미세 커널 최적화**
    - LibShalom은 OpenBLAS의 가장자리 처리 커널을 개선하여 메모리 지연을 숨기고 명령어 스케줄링을 최적화합니다.
    - 이 전략은 ARMv8 아키텍처에서 OpenBLAS 구현보다 성능을 크게 향상시킵니다.

6. **병렬화 방법**
    - 작은 GEMM은 단일 스레드로 실행되지만, 불규칙한 모양의 GEMM은 병렬 실행으로 이점을 얻을 수 있습니다.
    - LibShalom은 고정된 작업 분할 방식을 사용하여 병렬화하고, 모든 CPU 코어를 활용합니다.

7. **실험 설정**
    - 평가 플랫폼: Phytium 2000+, Kunpeng 920, ThunderX2 등 ARMv8 멀티코어 아키텍처에서 LibShalom을 평가합니다.
    - LibShalom은 다양한 작은 및 불규칙한 행렬에 대해 테스트되었으며, 다른 주요 BLAS 라이브러리와 비교되었습니다.

8. **결과 및 토론**
    - LibShalom은 작은 및 불규칙한 행렬에서 다른 라이브러리보다 일관되게 높은 성능을 보였습니다.
    - 특히 작은 행렬 크기에서 더 큰 성능 향상을 나타냈습니다.

9. **관련 연구**
    - 고성능 선형 대수 라이브러리는 HPC 시스템 소프트웨어 스택의 중요한 구성 요소입니다.
    - 기존 연구들은 주로 x86 아키텍처나 GPU에 최적화되어 있으며, ARMv8 아키텍처에 대한 최적화는 부족합니다.

10. **결론 및 향후 연구**
    - LibShalom은 작은 및 불규칙한 모양의 GEMM을 ARMv8 멀티코어에서 최적화하는 오픈소스 라이브러리입니다.
    - 향후 연구는 희소 행렬 계산으로 최적화를 확장하고, 성능 튜닝 프레임워크와 통합할 계획입니다.

### 전체 요약
LibShalom은 ARMv8 멀티코어 CPU에서 작은 및 불규칙한 모양의 GEMM을 최적화하기 위해 개발된 오픈소스 BLAS 라이브러리입니다. 이 논문은 기존 BLAS 라이브러리가 작은 행렬과 불규칙한 행렬에서 낮은 성능을 보이는 문제를 해결하기 위해 LibShalom을 설계하고 구현한 방법을 설명합니다. Goto 알고리즘을 기반으로 데이터 패킹과 계산을 겹쳐 실행하는 방법을 통해 메모리 접근 지연을 최소화하고, 분석적 방법을 사용하여 최적의 루프 타일링 매개변수를 결정합니다. 실험 결과, LibShalom은 여러 ARMv8 멀티코어 아키텍처에서 다른 주요 BLAS 라이브러리보다 우수한 성능을 보였습니다. 향후 연구로는 희소 행렬 계산으로의 확장과 성능 튜닝 프레임워크와의 통합이 제안되었습니다.